# Project Structure

Detailed breakdown of MyLiveWallpaper's directory layout and file organization.

## Directory Tree

```
mylivewallpaper/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                 # Main project documentation
â”œâ”€â”€ ğŸ“„ LICENSE                   # GNU GPL v3.0 license
â”œâ”€â”€ ğŸ“„ requirements.txt          # Python dependencies
â”œâ”€â”€ ğŸ“„ Makefile                  # Build automation
â”œâ”€â”€ ğŸ“„ main.py                   # Application entry point
â”œâ”€â”€ ğŸ“„ wallpaper_daemon.py       # Desktop window manager
â”œâ”€â”€ ğŸ“„ web_server.py             # Flask backend server
â”‚
â”œâ”€â”€ ğŸ“ lib/                      # Application modules
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ constants.py             # Configuration and paths
â”‚   â”œâ”€â”€ system_wallpaper.py      # macOS static wallpaper integration
â”‚   â”œâ”€â”€ widget_manager.py        # Widget discovery and management
â”‚   â”œâ”€â”€ web_window.py            # Auxiliary window management
â”‚   â””â”€â”€ thumbnails.py            # Thumbnail generation
â”‚
â”œâ”€â”€ ğŸ“ web/                      # Frontend web application files
â”‚   â”œâ”€â”€ index.html               # Main wallpaper display page
â”‚   â”œâ”€â”€ main.js                  # Wallpaper background video loader
â”‚   â”œâ”€â”€ widgets.js               # Widget iframe loader
â”‚   â”œâ”€â”€ style.css                # Main stylesheet
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ wallpaper_selector/   # Wallpaper selection UI
â”‚   â”‚   â”œâ”€â”€ index.html           # Wallpaper grid/list interface
â”‚   â”‚   â”œâ”€â”€ main.js              # Wallpaper browser logic
â”‚   â”‚   â””â”€â”€ style.css            # Wallpaper selector styling
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ widget_center/        # Widget configuration UI
â”‚       â”œâ”€â”€ index.html           # Widget manager interface
â”‚       â”œâ”€â”€ widget_center.js     # Widget positioning and config
â”‚       â””â”€â”€ style.css            # Widget center styling
â”‚
â”œâ”€â”€ ğŸ“ examples/                 # Example content for users
â”‚   â”œâ”€â”€ ğŸ“ widgets/              # Example widget templates
â”‚   â”‚   â”œâ”€â”€ ğŸ“ clock/            # Clock widget example
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.html      
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.css       
â”‚   â”‚   â”‚   â””â”€â”€ widget.js        
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ quote/            # Quote widget example
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.html
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.css
â”‚   â”‚   â”‚   â””â”€â”€ widget.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“ status/           # System status widget example
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.html
â”‚   â”‚   â”‚   â”œâ”€â”€ widget.css
â”‚   â”‚   â”‚   â””â”€â”€ widget.js
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ sample/           # Minimal widget template
â”‚   â”‚       â”œâ”€â”€ widget.html
â”‚   â”‚       â”œâ”€â”€ widget.css
â”‚   â”‚       â””â”€â”€ widget.js
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ wallpapers/           # Example wallpaper videos
â”‚       â”œâ”€â”€ example1.mp4
â”‚       â”œâ”€â”€ example2.mov
â”‚       â””â”€â”€ example3.webm
â”‚
â”œâ”€â”€ ğŸ“ docs/                     # Developer documentation
â”‚   â”œâ”€â”€ README.md                # Documentation index
â”‚   â”œâ”€â”€ ARCHITECTURE.md          # System architecture overview
â”‚   â”œâ”€â”€ BUILD.md                 # Building from source guide
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md     # This file
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ widget_development/   # Widget creation guide
â”‚       â”œâ”€â”€ README.md            # Widget development guide
â”‚       â”œâ”€â”€ STRUCTURE.md         # Widget file structure
â”‚       â”œâ”€â”€ BEST_PRACTICES.md    # Widget best practices
â”‚       â”œâ”€â”€ STYLING.md           # CSS and responsive design
â”‚       â””â”€â”€ EXAMPLES.md          # Widget code examples
â”‚
â”œâ”€â”€ ğŸ“ main.build/               # Build intermediates (generated by build process)
â”‚
â”œâ”€â”€ ğŸ“ main.dist/                # Distribution files (generated by build process)
â”‚
â”œâ”€â”€ ğŸ“ __pycache__/              # Python cache (auto-generated)
â”‚
â””â”€â”€ ğŸ“ .git/                     # Git repository metadata

```

## File Purposes

### Root Files

| File | Purpose |
|------|---------|
| `main.py` | Application entry point; initializes all systems and menu bar app |
| `wallpaper_daemon.py` | Creates and manages the borderless desktop window displaying widgets |
| `web_server.py` | Flask server; provides REST API and serves web interfaces |
| `requirements.txt` | List of Python package dependencies with versions |
| `Makefile` | Automation for building standalone `.app` bundle with Nuitka |
| `README.md` | Main project documentation for users and developers |
| `LICENSE` | GNU General Public License v3.0 |

### lib/ Directory

Core Python modules providing application functionality:

| File | Purpose |
|------|---------|
| `constants.py` | Configuration paths, default settings, directory structure |
| `system_wallpaper.py` | macOS Cocoa integration; wallpaper setting and space monitoring |
| `widget_manager.py` | Widget discovery, configuration management, persistence |
| `web_window.py` | Creates and manages auxiliary windows (Library, Widget Center) |
| `thumbnails.py` | Video-to-image conversion for wallpaper previews |

### web/ Directory

Frontend web application served by Flask:

| File/Folder | Purpose |
|-------------|---------|
| `index.html` | Main widget display page loaded in WallpaperDaemon |
| `main.js` | Fetches and plays current wallpaper video |
| `widgets.js` | Loads enabled widgets as isolated iframes |
| `style.css` | Styling for main wallpaper display |
| `wallpaper_selector/` | UI for browsing and selecting wallpapers |
| `widget_center/` | UI for configuring widget positions and settings |

### examples/ Directory

Templates and sample content for users:

| Folder | Purpose |
|--------|---------|
| `widgets/` | Example widget templates (clock, quote, status, sample) |
| `wallpapers/` | Example wallpaper videos in various formats |

Each widget example contains:
- `widget.html` - Widget DOM structure
- `widget.css` - Responsive styling using container queries
- `widget.js` - Update logic and event handling

For details, see [Widget Development Guide](./widget_development/README.md).

### docs/ Directory

Developer documentation:

| File | Purpose |
|------|---------|
| `README.md` | Documentation index and navigation |
| `ARCHITECTURE.md` | System design and component overview |
| `BUILD.md` | Step-by-step build and distribution guide |
| `PROJECT_STRUCTURE.md` | This file; directory layout reference |
| `widget_development/` | In-depth widget creation guide (see next section) |

## Runtime Directories

These directories are created at runtime in user's home directory:

```
~/Library/Application Support/MyLiveWallpaper/
â”œâ”€â”€ wallpapers/          # User's wallpaper video files
â”œâ”€â”€ widgets/             # User's custom widget folders
â””â”€â”€ widget_config.json   # Widget configuration and positions

/tmp/mylivewallpaper_cache/
â””â”€â”€ *.png                # Cached wallpaper thumbnails
```

## Code Organization Principles

### Separation of Concerns
- **Backend** (Python) - System integration, business logic, data management
- **Frontend** (JavaScript) - User interfaces, interaction handling
- **Configuration** - External JSON files for persistence

### Modularity
- Each module has a single responsibility
- Widget code is isolated in iframes to prevent conflicts
- Web windows are reused and managed centrally

### Extensibility
- Widgets are simple HTML/CSS/JS templates
- New widgets can be added without modifying core code
- Configuration system allows customization without code changes

### Resource Management
- Web windows are reused when possible
- Thumbnails are cached to disk
- Background threads prevent UI blocking

## Build Artifacts

When building with `make build`:

```
MyLiveWallpaper.app/              # Final application bundle
â”œâ”€â”€ Contents/
â”‚   â”œâ”€â”€ MacOS/
â”‚   â”‚   â””â”€â”€ MyLiveWallpaper       # Compiled executable
â”‚   â”œâ”€â”€ Resources/
â”‚   â”‚   â”œâ”€â”€ web/                  # Web files (included)
â”‚   â”‚   â”œâ”€â”€ examples/             # Examples (included)
â”‚   â”‚   â””â”€â”€ MyLiveWallpaper.icns  # Application icon
â”‚   â””â”€â”€ Info.plist                # Bundle metadata
```

These directories are created during build and can be removed with `make clean`:
- `main.build/` - Intermediate compilation files
- `main.dist/` - Distribution artifacts

---

For widget creation details, see [Widget Development Guide](./widget_development/README.md).
